# üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Shop Microservices

## üéØ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: **8/10**

–≠—Ç–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (9/10)**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –ø–æ –¥–æ–º–µ–Ω–∞–º (User, Product, Order, Cart)
- ‚úÖ API Gateway –¥–ª—è –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞
- ‚úÖ Database per Service pattern (–æ—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏:
  - REST API –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
  - gRPC –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Product Service)
  - Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- ‚úÖ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
Gateway (3000)
   ‚îú‚îÄ‚Üí User Service (5000) ‚Üí PostgreSQL (5433)
   ‚îú‚îÄ‚Üí Product Service (5001) ‚Üí PostgreSQL (5434)
   ‚îú‚îÄ‚Üí Order Service (5002) ‚Üí PostgreSQL (5435)
   ‚îî‚îÄ‚Üí Cart Service (5003) ‚Üí PostgreSQL (5436)
        ‚îî‚îÄ‚Üí Product Service (gRPC:50051)

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
   ‚îú‚îÄ‚Üí Kafka + Zookeeper
   ‚îú‚îÄ‚Üí Redis + RedisInsight
   ‚îî‚îÄ‚Üí Loki + Promtail + Grafana
```

### 2. **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (8/10)**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å—Ç–µ–∫: Loki + Promtail + Grafana
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏–∑ –≤—Å–µ—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –•–æ—Ä–æ—à–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ retention (7 –¥–Ω–µ–π –¥–ª—è dev)
- ‚úÖ Health checks –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è Docker —Å–µ—Ç—å –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Loki:**
```yaml
‚úÖ BoltDB –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
‚úÖ Filesystem –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
‚úÖ WAL –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
‚úÖ Compactor –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Promtail:**
```yaml
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–æ–∫ (service, container, project)
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ JSON –ª–æ–≥–æ–≤
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–µ–π (level, message, timestamp)
```

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (9/10)**

**–û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- ‚úÖ `LOGGING_GUIDE.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ `api_gateway.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ API Gateway
- ‚úÖ `kafka.md` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å Kafka
- ‚úÖ `grpc_setup.md` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ gRPC
- ‚úÖ `migrations.md` ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ docker-compose —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ credentials

### 4. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (8/10)**

**Docker Compose:**
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è dev –∏ logging
- ‚úÖ Volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Health checks
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ depends_on
- ‚úÖ Restart policies

**–°–µ—Ä–≤–∏—Å—ã:**
- ‚úÖ PostgreSQL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ PgAdmin –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î
- ‚úÖ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ RedisInsight –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Redis
- ‚úÖ Kafka + Zookeeper –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- ‚úÖ Loki + Promtail + Grafana –¥–ª—è –ª–æ–≥–æ–≤

### 5. **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (8/10)**

**Backend:**
- ‚úÖ NestJS ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- ‚úÖ TypeScript ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ TypeORM ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ gRPC ‚Äî –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ KafkaJS ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kafka

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ Docker + Docker Compose
- ‚úÖ PostgreSQL 14
- ‚úÖ Redis 7
- ‚úÖ Kafka 7.6
- ‚úÖ Grafana 10.2.3
- ‚úÖ Loki 2.9.3

---

## ‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ (5/10)**

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:**
```typescript
// ‚ùå –ù–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ
console.log("‚úÖ –ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:", user.email);

// ‚ùå –≠–º–æ–¥–∑–∏ –º–æ–≥—É—Ç –ª–æ–º–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
// ‚ùå –ù–µ—Ç —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
// ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (traceId, userId)
// ‚ùå –°–ª–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –≤ Grafana
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
// ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
this.logger.info('User found', {
  userId: user.id,
  email: user.email,
  timestamp: new Date().toISOString(),
});

// ‚úÖ –° traceId
this.logger.info('Processing request', {
  traceId: req.traceId,
  method: req.method,
  url: req.url,
});
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å `StructuredLogger` –∫–ª–∞—Å—Å
2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log` –Ω–∞ `logger.info/error/warn`
3. –î–æ–±–∞–≤–∏—Ç—å traceId –≤–æ –≤—Å–µ –ª–æ–≥–∏
4. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

### 2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (0/10)**

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- ‚ùå –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (CPU, –ø–∞–º—è—Ç—å, RPS)
- ‚ùå –ú–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚ùå –î–∞—à–±–æ—Ä–¥—ã –≤ Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# –î–æ–±–∞–≤–∏—Ç—å Prometheus
services:
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
```

```typescript
// –í NestJS –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
import { PrometheusModule } from '@willsoto/nestjs-prometheus';

@Module({
  imports: [PrometheusModule.register()],
})
```

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞:**
- HTTP requests (count, duration, status codes)
- Database queries (count, duration)
- Kafka messages (published, consumed)
- gRPC calls (count, duration, errors)
- Business metrics (users registered, orders created)

### 3. **Distributed Tracing (0/10)**

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå Jaeger –∏–ª–∏ Tempo –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
- ‚ùå Trace ID –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ‚ùå –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# –î–æ–±–∞–≤–∏—Ç—å Jaeger
services:
  jaeger:
    image: jaegertracing/all-in-one:latest
    ports:
      - "16686:16686"  # UI
      - "14268:14268"  # HTTP collector
```

```typescript
// –í NestJS –¥–æ–±–∞–≤–∏—Ç—å OpenTelemetry
import { NodeSDK } from '@opentelemetry/sdk-node';
import { JaegerExporter } from '@opentelemetry/exporter-jaeger';

const sdk = new NodeSDK({
  traceExporter: new JaegerExporter({
    endpoint: 'http://jaeger:14268/api/traces',
  }),
});
```

### 4. **Security (6/10)**

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –•–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–æ–ª–µ–π –≤ docker-compose
- ‚ö†Ô∏è `auth_enabled: false` –≤ Loki
- ‚ö†Ô∏è –ù–µ—Ç HTTPS
- ‚ö†Ô∏è –ù–µ—Ç rate limiting
- ‚ö†Ô∏è –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–≤–æ–∑–º–æ–∂–Ω–æ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env —Ñ–∞–π–ª—ã
services:
  db:
    environment:
      - POSTGRES_PASSWORD=${DB_PASSWORD}
```

```typescript
// –î–æ–±–∞–≤–∏—Ç—å rate limiting
import { ThrottlerModule } from '@nestjs/throttler';

@Module({
  imports: [
    ThrottlerModule.forRoot({
      ttl: 60,
      limit: 10,
    }),
  ],
})
```

### 5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ)**

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è API
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –¢–µ—Å—Ç—ã –¥–ª—è Kafka consumers/producers
- –¢–µ—Å—Ç—ã –¥–ª—è gRPC —Å–µ—Ä–≤–∏—Å–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```typescript
// Unit —Ç–µ—Å—Ç
describe('UsersService', () => {
  it('should create user', async () => {
    const user = await service.createUser(dto);
    expect(user).toBeDefined();
  });
});

// E2E —Ç–µ—Å—Ç
describe('POST /users', () => {
  it('should create user', () => {
    return request(app.getHttpServer())
      .post('/users')
      .send(dto)
      .expect(201);
  });
});
```

### 6. **CI/CD (0/10)**

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå GitHub Actions / GitLab CI
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- ‚ùå –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå Docker –æ–±—Ä–∞–∑—ã –≤ registry
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# .github/workflows/ci.yml
name: CI

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - run: npm install
      - run: npm test
      - run: npm run lint
```

### 7. **–î–∞—à–±–æ—Ä–¥—ã –≤ Grafana (0/10)**

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤
- ‚ùå –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –∏–∑ `GRAFANA_DASHBOARDS_EXAMPLES.md`:
1. Microservices Overview
2. Error Tracking
3. Gateway Service Monitoring
4. Business Metrics

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### üî• –ö—Ä–∏—Ç–∏—á–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–æ–∑–¥–∞—Ç—å `StructuredLogger`
   - –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log`
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ JSON
   - –í—Ä–µ–º—è: 2-3 —á–∞—Å–∞

2. **Trace ID**
   - –î–æ–±–∞–≤–∏—Ç—å middleware –≤ Gateway
   - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å traceId –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å traceId
   - –í—Ä–µ–º—è: 1-2 —á–∞—Å–∞

3. **–°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –≤ Grafana**
   - Microservices Overview
   - Error Tracking
   - –í—Ä–µ–º—è: 2-3 —á–∞—Å–∞

### ‚ö° –í–∞–∂–Ω–æ (—Å–¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ)

4. **Prometheus + –º–µ—Ç—Ä–∏–∫–∏**
   - –î–æ–±–∞–≤–∏—Ç—å Prometheus
   - –°–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫
   - –í—Ä–µ–º—è: 4-6 —á–∞—Å–æ–≤

5. **–ê–ª–µ—Ä—Ç—ã –≤ Grafana**
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –í—Ä–µ–º—è: 2-3 —á–∞—Å–∞

6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã
   - Integration —Ç–µ—Å—Ç—ã
   - E2E —Ç–µ—Å—Ç—ã
   - –í—Ä–µ–º—è: 8-10 —á–∞—Å–æ–≤

### üí° –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (–¥–ª—è production)

7. **Distributed Tracing**
   - –î–æ–±–∞–≤–∏—Ç—å Jaeger
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å OpenTelemetry
   - –í—Ä–µ–º—è: 4-6 —á–∞—Å–æ–≤

8. **Security**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - Rate limiting
   - HTTPS
   - –í—Ä–µ–º—è: 4-6 —á–∞—Å–æ–≤

9. **CI/CD**
   - GitHub Actions
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
   - Docker registry
   - –í—Ä–µ–º—è: 6-8 —á–∞—Å–æ–≤

---

## üìà Roadmap

### –§–∞–∑–∞ 1: –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)
- [x] Loki + Promtail + Grafana (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Trace ID
- [ ] –î–∞—à–±–æ—Ä–¥—ã –≤ Grafana

### –§–∞–∑–∞ 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] Prometheus
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –î–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫
- [ ] –ê–ª–µ—Ä—Ç—ã

### –§–∞–∑–∞ 3: Observability (2-3 –Ω–µ–¥–µ–ª–∏)
- [ ] Distributed Tracing (Jaeger)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenTelemetry
- [ ] Unified observability dashboard

### –§–∞–∑–∞ 4: Production Ready (3-4 –Ω–µ–¥–µ–ª–∏)
- [ ] Security improvements
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] CI/CD
- [ ] Documentation

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Ç–µ–∫—É—â–∞—è)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0/–º–µ—Å—è—Ü
- **–†–µ—Å—É—Ä—Å—ã:** ~4GB RAM, ~10GB disk

### Production (–æ–±–ª–∞–∫–æ)

**AWS (–ø—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å):**
- ECS Fargate (5 —Å–µ—Ä–≤–∏—Å–æ–≤): ~$100/–º–µ—Å—è—Ü
- RDS PostgreSQL (5 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤): ~$200/–º–µ—Å—è—Ü
- ElastiCache Redis: ~$50/–º–µ—Å—è—Ü
- MSK Kafka: ~$150/–º–µ—Å—è—Ü
- CloudWatch Logs: ~$20/–º–µ—Å—è—Ü
- **–ò—Ç–æ–≥–æ:** ~$520/–º–µ—Å—è—Ü

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–¥–µ—à–µ–≤–ª–µ):**
- DigitalOcean Kubernetes: ~$100/–º–µ—Å—è—Ü
- Managed PostgreSQL: ~$60/–º–µ—Å—è—Ü
- Managed Redis: ~$15/–º–µ—Å—è—Ü
- Grafana Cloud (free tier): $0/–º–µ—Å—è—Ü
- **–ò—Ç–æ–≥–æ:** ~$175/–º–µ—Å—è—Ü

---

## üéì –ß—Ç–æ –≤—ã –∏–∑—É—á–∏–ª–∏

### ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- API Gateway
- Database per Service
- Event-driven architecture

### ‚úÖ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- NestJS + TypeScript
- PostgreSQL + TypeORM
- Redis
- Kafka
- gRPC
- Docker + Docker Compose

### ‚úÖ Observability
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Loki + Promtail + Grafana
- LogQL
- –î–∞—à–±–æ—Ä–¥—ã

### üîÑ –ß—Ç–æ –µ—â–µ —Å—Ç–æ–∏—Ç –∏–∑—É—á–∏—Ç—å
- Prometheus + –º–µ—Ç—Ä–∏–∫–∏
- Distributed Tracing (Jaeger)
- Kubernetes
- Service Mesh (Istio)
- CI/CD (GitHub Actions)
- Terraform (Infrastructure as Code)

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ö–Ω–∏–≥–∏
- "Building Microservices" by Sam Newman
- "Designing Data-Intensive Applications" by Martin Kleppmann
- "Site Reliability Engineering" by Google

### –ö—É—Ä—Å—ã
- [Microservices with Node JS and React](https://www.udemy.com/course/microservices-with-node-js-and-react/)
- [Observability Engineering](https://www.oreilly.com/library/view/observability-engineering/9781492076438/)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [NestJS Docs](https://docs.nestjs.com/)
- [Grafana Docs](https://grafana.com/docs/)
- [Kafka Docs](https://kafka.apache.org/documentation/)

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ Grafana!**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –í–Ω–µ–¥—Ä–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –î–æ–±–∞–≤—å—Ç–µ Trace ID
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –≤ Grafana
4. –î–æ–±–∞–≤—å—Ç–µ Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã

**–£–¥–∞—á–∏ –≤ –∏–∑—É—á–µ–Ω–∏–∏! üöÄ**

---

## üìû –í–æ–ø—Ä–æ—Å—ã?

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã:
1. –ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `infra/aUn/`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `GRAFANA_TUTORIAL.md`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–ø–∞—Ä–≥–∞–ª–∫—É `GRAFANA_CHEATSHEET.md`
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –¥–∞—à–±–æ—Ä–¥–æ–≤ –∏–∑ `GRAFANA_DASHBOARDS_EXAMPLES.md`
